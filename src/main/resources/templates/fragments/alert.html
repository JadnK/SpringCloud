<div id="notificationContainer" class="fixed top-5 left-1/2 transform -translate-x-1/2 flex flex-col gap-3 z-[9999]"></div>

<div th:if="${error}" class="hidden" data-message-type="error" th:data-message-text="${error}"></div>
<div th:if="${success}" class="hidden" data-message-type="success" th:data-message-text="${success}"></div>

<script>
    function createNotification(message, type = 'error', duration = 5000) {
        const container = document.getElementById('notificationContainer');

        const config = {
            error: {
                bg: 'bg-gradient-to-r from-red-600 to-red-500',
                icon: `<svg xmlns="http://www.w3.org/2000/svg" class="w-6 h-6 flex-shrink-0" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                         <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4m0 4h.01M12 2a10 10 0 11-0 20 10 10 0 010-20z" />
                       </svg>`
            },
            success: {
                bg: 'bg-gradient-to-r from-green-500 to-green-400',
                icon: `<svg xmlns="http://www.w3.org/2000/svg" class="w-6 h-6 flex-shrink-0" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                         <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7" />
                       </svg>`
            }
        };

        const notif = document.createElement('div');
        notif.className = `${config[type].bg} text-white rounded-xl shadow-lg p-4 flex items-center gap-3 pointer-events-auto transform transition duration-500 scale-95 opacity-0`;
        notif.innerHTML = `
            ${config[type].icon}
            <span class="font-semibold text-sm md:text-base">${message}</span>
            <button class="ml-auto text-white hover:text-gray-200">&times;</button>
        `;

        notif.querySelector('button').addEventListener('click', () => {
            notif.classList.remove('scale-100', 'opacity-100');
            notif.classList.add('scale-95', 'opacity-0');
            setTimeout(() => notif.remove(), 400);
        });

        container.appendChild(notif);

        setTimeout(() => {
            notif.classList.remove('scale-95', 'opacity-0');
            notif.classList.add('scale-100', 'opacity-100');
        }, 50);

        setTimeout(() => {
            notif.classList.remove('scale-100', 'opacity-100');
            notif.classList.add('scale-95', 'opacity-0');
            setTimeout(() => notif.remove(), 400);
        }, duration);
    }

    document.querySelectorAll('[data-message-text]').forEach(el => {
        const type = el.getAttribute('data-message-type');
        const msg = el.getAttribute('data-message-text');
        if(msg) createNotification(msg, type);
    });
</script>
